name: Check for Localhost URLs

on: 
  pull_request:
    branches:
      - main 

jobs:
  check-localhost:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Search for 'localhost' references
        run: |
          echo "üîç Procurando por URLs com 'localhost'..."
          MATCHES=$(grep -rnw '.' -e 'localhost:3000' --include=\*.{js,jsx,ts,tsx,json} || true)

          if [ -n "$MATCHES" ]; then
            echo "üö® Foram encontradas refer√™ncias a 'localhost:3000':"
            echo "$MATCHES"
            echo "‚ùå Por favor, substitua 'localhost:3000' por 'https://apolopi.onrender.com' antes de fazer o pull request."
            exit 1
          else
            echo "‚úÖ Nenhuma refer√™ncia a 'localhost:3000' encontrada."
          fi
